{"name":"Running NFD Integration Tests","tagline":"Using Mini-NDN and Vagrant","body":"## Team Members\r\n\r\nVince Lehman (@vslehman), Davide Pesavento (@Pesa), Eric Newberry (@eric135)\r\n\r\n## Problem Statement\r\n\r\nCurrently, the NFD integration tests can take hours to run using either Vagrant or Emulab. It would be helpful to the project if integration tests could be run more efficiently and in a much shorter time on Mini-NDN. In addition, this new testing infrastructure could potentially be integrated with Jenkins to test for breaking changes.\r\n\r\n## Approach\r\n\r\nTo effectively use each team member's skills, we worked simultaneously on two tasks:\r\n\r\nVince and Davide worked to get the testing infrastructure and the integration tests working on Mini-NDN.\r\n\r\nEric worked to optimize the Vagrant tests for comparison against the Mini-NDN infrastructure. This was accomplished by eliminating the bottleneck of installing Boost and the NDN libraries and packages four separate times. Now, these steps are executed once on a template VM. This is then cloned for each of the four NDN nodes in the testing environment.\r\n\r\n## Results\r\n\r\n![Running tests](http://netwisdom.cs.memphis.edu/hackathon/run-tests.png)\r\n![Tests passing](http://netwisdom.cs.memphis.edu/hackathon/test-pass.png)\r\n\r\n#### Mini-NDN\r\nTime to create topology and run 9 tests: 134 seconds\r\n\r\n#### Vagrant\r\n\r\nTime to install dependencies, build code, create VMs, and run tests: 88 minutes, 14 seconds\r\n\r\n## Current Status\r\n\r\nTests that currently pass **(9 of 19)**:\r\n- **test_interest_aggregation**\r\n- **test_unixface**\r\n- **test_ndnpeekpoke**\r\n- **test_route_expiration**\r\n- **test_ndnping**\r\n- **test_cs_freshness**\r\n- **test_nrd**\r\n- **test_fib_matching**\r\n- **test_ndntraffic**\r\n\r\nTests that currently fail:\r\n- **test_linkfail**\r\n-2 Failures: multicast and ncc **(1 of 3 pass)**\r\n- **test_hub_discovery**\r\n-Passes but many errors are displayed; may be issue with test\r\n- **test_interest_loop**\r\n-cp: cannot stat ‘/usr/local/etc/ndn/keys’: No such file or directory\r\n-ERROR: error while connecting to the forwarder (No such file or directory)\r\n- **test_localhost_scope**\r\n-Asks for login info\r\n- **test_multicast_strategy**\r\n-Asks for login info\r\n- **test_multicast**\r\n-nfd-status command does not run\r\n- **test_tcp_udp_tunnel**\r\n-A can’t create Face to D; no route\r\n- **test_localhop**\r\n-Error while connecting to the forwarder\r\n- **test_nfdc**\r\n-Error while connecting to the forwarder\r\n- **test_remote_register**\r\n-Asks for login info\r\n\r\n--\r\n### Vagrant\r\n\r\nThe optimizations to the Vagrant environment have reduced the run time significantly. Instead of taking three or four hours, the integration tests now take just under an hour and a half to run.\r\n\r\n## TODOs\r\n\r\n- Get all tests working!\r\n\r\n## Future\r\n\r\n- Trigger tests from Jenkins","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}